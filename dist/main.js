(()=>{"use strict";function t(t){localStorage.setItem("storedListwithTask",JSON.stringify(t))}function e(t,e,a,s){this.taskTitle=t,this.details=e,this.date=a,this.time=s,this.status=!1,this.importance=!1}function a(t){const s=document.getElementById("panelTitle");let n=0;for(let e=0;e<t.length;++e)t[e].title==s.textContent&&(n=e);const l=document.querySelector(".task-list");l.innerHTML="",l.id=n;for(let s=0;s<t[n].task.length;++s){let i=t[n].task[s],d=new e(i.taskTitle,i.details,i.date,i.time),c=document.createElement("div");c.id="whole-taskStatus-"+s,0==t[n].task[s].status?c.classList.add("taskTitle"):c.classList.add("taskTitle","doneTask"),c.appendChild(h(t[n].task[s].taskTitle,t[n].task[s].details,s,n,t[n].task[s].status)),c.appendChild(f(t[n].task[s].date,t[n].task[s].time,s,t[n].task[s].importance));const o=document.createElement("div");o.classList.add("trashTaskBtn"),o.id="trashTask-"+s,o.innerHTML='<i class="fa-solid fa-trash"></i>',o.addEventListener("click",(()=>{d.deleteTask(s,t[n].task),l.innerHTML="",a(t),L()})),c.appendChild(o),l.appendChild(c)}}e.prototype.deleteTask=function(e,a){a.splice(e,1),t(B)};const s=document.getElementById("task-btn"),n=document.querySelector(".closeTaskBtn");function l(){document.querySelector(".taskForm").classList.add("hide"),document.forms.formInfo.reset()}const i=document.querySelector(".submitTaskBtn");function d(t){let a=document.querySelector(".task-list");a.innerHTML="";for(let s=0;s<B[t].task.length;s++){let n=B[t].task[s],l=new e(n.taskTitle,n.details,n.date,n.time),i=document.createElement("div");i.id="whole-taskStatus-"+s,0==B[t].task[s].status?i.classList.add("taskTitle"):i.classList.add("taskTitle","doneTask"),I.task=l,i.appendChild(h(I.task.taskTitle,I.task.details,s,t,B[t].task[s].status)),i.appendChild(f(I.task.date,I.task.time,s,B[t].task[s].importance));const c=document.createElement("div");c.classList.add("trashTaskBtn"),c.id="trashTask-"+s,c.innerHTML='<i class="fa-solid fa-trash"></i>',c.addEventListener("click",(()=>{l.deleteTask(s,B[t].task),a.innerHTML="",d(t),L()})),i.appendChild(c),a.appendChild(i)}}const c=document.getElementById("allTasks");function o(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-list-check"></i> All Tasks',document.querySelector(".task-btn").style.display="none";let t=document.querySelector(".task-list");t.innerHTML="";for(let a=0;a<B.length;a++)for(let s=0;s<B[a].task.length;++s){let n=B[a].task[s],l=new e(n.taskTitle,n.details,n.date,n.time),i=document.createElement("div");i.id="whole-taskStatus-"+s,0==B[a].task[s].status?i.classList.add("taskTitle"):i.classList.add("taskTitle","doneTask"),I.task=l,i.appendChild(h(I.task.taskTitle,I.task.details,s,a,B[a].task[s].status)),i.appendChild(f(I.task.date,I.task.time,s,B[a].task[s].importance));const d=document.createElement("div");d.classList.add("trashTaskBtn"),d.id="trashTask-"+s,d.innerHTML='<i class="fa-solid fa-trash"></i>',d.addEventListener("click",(()=>{l.deleteTask(s,B[a].task),t.innerHTML="",o(),y()})),i.appendChild(d),t.appendChild(i)}}const r=document.getElementById("important");function k(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-star"></i> Important Tasks',document.querySelector(".task-btn").style.display="none";let t=document.querySelector(".task-list");t.innerHTML="";for(let a=0;a<B.length;a++)for(let s=0;s<B[a].task.length;++s)if(B[a].task[s].importance){let n=B[a].task[s],l=new e(n.taskTitle,n.details,n.date,n.time),i=document.createElement("div");i.id="whole-taskStatus-"+s,0==B[a].task[s].status?i.classList.add("taskTitle"):i.classList.add("taskTitle","doneTask"),I.task=l,i.appendChild(h(I.task.taskTitle,I.task.details,s,a,B[a].task[s].status)),i.appendChild(f(I.task.date,I.task.time,s,B[a].task[s].importance));const d=document.createElement("div");d.classList.add("trashTaskBtn"),d.id="trashTask-"+s,d.innerHTML='<i class="fa-solid fa-trash"></i>',d.addEventListener("click",(()=>{l.deleteTask(s,B[a].task),t.innerHTML="",k(),g()})),i.appendChild(d),t.appendChild(i)}}const m=document.getElementById("today");function u(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-calendar-day"></i> Today\'s Tasks',document.querySelector(".task-btn").style.display="none";let t=document.querySelector(".task-list");t.innerHTML="";for(let a=0;a<B.length;a++)for(let s=0;s<B[a].task.length;++s){const n=new Date;let l=("0"+n.getDate()).slice(-2),i=("0"+n.getMonth()+1).slice(-2),d=`${n.getFullYear()}-${i}-${l}`;if(B[a].task[s].date==d){let n=B[a].task[s],l=new e(n.taskTitle,n.details,n.date,n.time),i=document.createElement("div");i.id="whole-taskStatus-"+s,0==B[a].task[s].status?i.classList.add("taskTitle"):i.classList.add("taskTitle","doneTask"),I.task=l,i.appendChild(h(I.task.taskTitle,I.task.details,s,a,B[a].task[s].status)),i.appendChild(f(I.task.date,I.task.time,s,B[a].task[s].importance));const d=document.createElement("div");d.classList.add("trashTaskBtn"),d.id="trashTask-"+s,d.innerHTML='<i class="fa-solid fa-trash"></i>',d.addEventListener("click",(()=>{l.deleteTask(s,B[a].task),t.innerHTML="",u(),E()})),i.appendChild(d),t.appendChild(i)}}}const p=document.getElementById("week");function T(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-calendar-week"></i> This week\'s tasks',document.querySelector(".task-btn").style.display="none";let t=document.querySelector(".task-list");t.innerHTML="";for(let a=0;a<B.length;a++)for(let s=0;s<B[a].task.length;++s){const n=new Date;function l(t,e){for(var a=new Array,s=t;s<=e;){let t=("0"+s.getDate()).slice(-2),e=("0"+(s.getMonth()+1)).slice(-2),n=`${s.getFullYear()}-${e}-${t}`;a.push(n),s=s.addDays(1)}return a}if(Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},l(n,n.addDays(7)).includes(B[a].task[s].date)){let i=B[a].task[s],d=new e(i.taskTitle,i.details,i.date,i.time),c=document.createElement("div");c.id="whole-taskStatus-"+s,0==B[a].task[s].status?c.classList.add("taskTitle"):c.classList.add("taskTitle","doneTask"),I.task=d,c.appendChild(h(I.task.taskTitle,I.task.details,s,a,B[a].task[s].status)),c.appendChild(f(I.task.date,I.task.time,s,B[a].task[s].importance));const o=document.createElement("div");o.classList.add("trashTaskBtn"),o.id="trashTask-"+s,o.innerHTML='<i class="fa-solid fa-trash"></i>',o.addEventListener("click",(()=>{d.deleteTask(s,B[a].task),t.innerHTML="",T(),v()})),c.appendChild(o),t.appendChild(c)}}}function f(t,e,a,s){const n=document.createElement("div");n.classList.add("dataContainer");const l=document.createElement("div");l.classList.add("date"),l.innerHTML=t,n.appendChild(l);const i=document.createElement("div");i.classList.add("time"),i.innerHTML=e,n.appendChild(i);const d=document.createElement("div");return d.classList.add("importantBtn"),d.innerHTML=s?'<i class="fa-solid fa-star"></i>':'<i class="fa-regular fa-star"></i>',d.id="taskImportance-"+a,n.appendChild(d),n}function h(e,a,s,n,l){const i=document.createElement("div");i.classList.add("containerDescription");const c=document.createElement("div");c.classList.add("frontTaskContainer");const r=document.createElement("button");r.setAttribute("type","checkbox"),r.classList.add("check-btn"),r.innerHTML=l?'<i class="fa-solid fa-check"></i>':'<i class="fa-solid fa-rotate"></i>',r.id="taskStatus-"+s,r.addEventListener("click",(()=>{l?(r.innerHTML='<i class="fa-solid fa-rotate"></i>',l=!1,B[n].task[s].status=!1,t(B)):(r.innerHTML='<i class="fa-solid fa-check"></i>',l=!0,B[n].task[s].status=!0,t(B));const e=document.getElementById("panelTitle");'<i class="fa-solid fa-list-check"></i> All Tasks'==e.innerHTML?(o(),y()):'<i class="fa-solid fa-star"></i> Important Tasks'==e.innerHTML?(k(),g()):'<i class="fa-solid fa-calendar-day"></i> Today\'s Tasks'==e.innerHTML?(u(),E()):'<i class="fa-solid fa-calendar-week"></i> This week\'s tasks'==e.innerHTML?(T(),v()):(d(n),L())})),c.appendChild(r);const m=document.createElement("div");m.innerHTML=e,m.classList.add("indvTaskTitle"),c.appendChild(m),i.appendChild(c);const p=document.createElement("div");return p.classList.add("taskDetails"),p.innerHTML=a,i.appendChild(p),i}const L=()=>{let e=0;const a=document.getElementById("panelTitle");for(let t=0;t<B.length;++t)B[t].title==a.textContent&&(e=t);for(let a=0;a<B[e].task.length;++a){const s=document.getElementById("taskImportance-"+a);s.addEventListener("click",(()=>{let n=B[e].task[a].importance;n?n&&(s.innerHTML='<i class="fa-regular fa-star"></i>',B[e].task[a].importance=!1,t(B)):(s.innerHTML='<i class="fa-solid fa-star"></i>',B[e].task[a].importance=!0,t(B))}))}},y=()=>{let e=[],a=0;for(let t=0;t<B.length;t++)for(let s=0;s<B[t].task.length;++s)document.getElementById("taskImportance-"+s).id="allTaskImp-"+a,e.push(B[t].task[s]),++a;for(let a=0;a<e.length;a++){const s=document.getElementById("allTaskImp-"+a);s.addEventListener("click",(()=>{const{importance:n}=e[a];n?n&&(s.innerHTML='<i class="fa-regular fa-star"></i>',e[a].importance=!1,t(B)):(s.innerHTML='<i class="fa-solid fa-star"></i>',e[a].importance=!0,t(B))}))}},g=()=>{let e=[],a=0;for(let t=0;t<B.length;t++)for(let s=0;s<B[t].task.length;++s)B[t].task[s].importance&&(document.getElementById("taskImportance-"+s).id="onlyImpTaskBtn-"+a,e.push(B[t].task[s]),++a);for(let a=0;a<e.length;a++){const s=document.getElementById("onlyImpTaskBtn-"+a);s.addEventListener("click",(()=>{const{importance:n}=e[a];n?n&&(s.innerHTML='<i class="fa-regular fa-star"></i>',e[a].importance=!1,k(),g(),t(B)):(s.innerHTML='<i class="fa-solid fa-star"></i>',e[a].importance=!0,k(),g(),t(B))}))}},E=()=>{let e=[],a=0;for(let t=0;t<B.length;t++)for(let s=0;s<B[t].task.length;++s){const n=new Date;let l=n.getDate(),i=n.getMonth()+1,d=`${n.getFullYear()}-${i}-${l}`;B[t].task[s].date==d&&(document.getElementById("taskImportance-"+s).id="todayImpTaskBtn-"+a,e.push(B[t].task[s]),++a)}for(let a=0;a<e.length;a++){const s=document.getElementById("todayImpTaskBtn-"+a);s.addEventListener("click",(()=>{const{importance:n}=e[a];n?n&&(s.innerHTML='<i class="fa-regular fa-star"></i>',e[a].importance=!1,u(),E(),t(B)):(s.innerHTML='<i class="fa-solid fa-star"></i>',e[a].importance=!0,u(),E(),t(B))}))}},v=()=>{let e=[],a=0;for(let s=0;s<B.length;s++)for(let n=0;n<B[s].task.length;++n){const l=new Date;function i(t,e){for(var a=new Array,s=t;s<=e;){let t=("0"+s.getDate()).slice(-2),e=("0"+(s.getMonth()+1)).slice(-2),n=`${s.getFullYear()}-${e}-${t}`;a.push(n),s=s.addDays(1)}return a}Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},i(l,l.addDays(7)).includes(B[s].task[n].date)&&(document.getElementById("taskImportance-"+n).id="weekImpTaskBtn-"+a,e.push(B[s].task[n]),++a)}for(let d=0;d<e.length;d++){const c=document.getElementById("weekImpTaskBtn-"+d);c.addEventListener("click",(()=>{const{importance:a}=e[d];a?a&&(c.innerHTML='<i class="fa-regular fa-star"></i>',e[d].importance=!1,T(),v(),t(B)):(c.innerHTML='<i class="fa-solid fa-star"></i>',e[d].importance=!0,T(),v(),t(B))}))}},I={title:"",task:[]};function M(t){this.title=t,this.task=[]}M.prototype.deletePrj=function(t){let e=JSON.parse(localStorage.getItem("storedListwithTask"));e.splice(t,1),localStorage.setItem("storedListwithTask",JSON.stringify(e)),B.splice(t,1)};let B=[];window.onload=()=>{null===localStorage.getItem("storedListwithTask")?B=[]:(JSON.parse(localStorage.getItem("storedListwithTask")).forEach((t=>{B.push(t)})),D(B))};const H=document.getElementById("add-project"),C=document.querySelector(".submitBtn"),w=document.querySelector(".closeBtn");function S(){document.querySelector("form").classList.add("hide"),document.forms.formInfo.reset()}function D(t){let e=document.querySelector(".project-list");e.innerHTML="";for(let n=0;n<t.length;n++){let l=new M(t[n].title);const i=document.createElement("div");i.classList.add("prjContainer");const d=document.createElement("div");d.id=n,I.title=l.title,d.classList.add("prjTitle"),d.innerHTML=l.title,i.appendChild(d);const c=document.createElement("div");c.classList.add("trashBtn"),c.innerHTML='<i class="fa-solid fa-trash"></i>',c.addEventListener("click",(a=>{l.deletePrj(d.id),e.innerHTML="",document.querySelector(".task-btn").style.display="none",document.getElementById("panelTitle").innerHTML='Project "'+l.title+'" has been deleted.',D(t),L()})),i.appendChild(c),d.addEventListener("click",(e=>{document.getElementById("panelTitle").textContent=l.title,s.textContent="+ Add Task",s.classList.add("task-btn"),"none"==s.style.display&&(s.style.display="flex"),a(t),L()})),e.appendChild(i)}return e}s.addEventListener("click",(()=>{document.getElementById("projectTaskForm").classList.remove("hide")})),i.addEventListener("click",(a=>{let s=document.getElementById("taskTitle"),n=document.getElementById("details"),i=document.getElementById("date"),c=document.getElementById("time");const o=document.getElementById("panelTitle");let r=0;for(let t=0;t<B.length;++t)B[t].title==o.textContent&&(r=t);a.preventDefault(),function(a,s,n,l,i){let d=new e(a,s,n,l);B[i].task.push(d),t(B)}(s.value,n.value,i.value,c.value,r),d(r),L(),l()})),n.addEventListener("click",(()=>{l()}));const b=document.getElementById("themeBtn"),F=document.querySelector(":root");b.addEventListener("click",(()=>{"Day"==b.innerHTML?(b.innerHTML="Night",F.style.setProperty("--blue","#FFFFFF"),F.style.setProperty("--white","#14213D"),F.style.setProperty("--black","#E5E5E5"),F.style.setProperty("--platinum","#FCA311"),F.style.setProperty("--yellow","#E5E5E5")):(b.innerHTML="Day",F.style.setProperty("--blue","#14213D"),F.style.setProperty("--white","#FFFFFF"),F.style.setProperty("--black","#000000"),F.style.setProperty("--platinum","#E5E5E5"),F.style.setProperty("--yellow","#FCA311"))})),H.addEventListener("click",(()=>{document.getElementById("projectForm").classList.remove("hide")})),C.addEventListener("click",(e=>{let a=document.getElementById("projectName");if(e.preventDefault(),""!==a.value){let e=new M(a.value);for(let t=0;t<B.length;++t)if(e.title==B[t].title)return void window.alert("Project title cannot be repeated or be blank.");!function(e){B.push(e),t(B)}(e),D(B),S()}})),w.addEventListener("click",(()=>{S()})),c.addEventListener("click",(()=>{o(),y()})),m.addEventListener("click",(()=>{u(),E()})),p.addEventListener("click",(()=>{T(),v()})),r.addEventListener("click",(()=>{k(),g()}))})();