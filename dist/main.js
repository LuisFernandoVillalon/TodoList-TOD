(()=>{"use strict";function t(t,e,a,s){this.taskTitle=t,this.details=e,this.date=a,this.time=s,this.status=!1,this.importance=!1}function e(){const a=document.getElementById("panelTitle");let s=0;for(let t=0;t<f.length;++t)f[t].title==a.textContent&&(s=t);const n=document.querySelector(".task-list");n.innerHTML="",n.id=s;for(let a=0;a<f[s].task.length;++a){let i=f[s].task[a],l=new t(i.taskTitle,i.details,i.date,i.time),r=document.createElement("div");r.id="whole-taskStatus-"+a,0==f[s].task[a].status?r.classList.add("taskTitle"):r.classList.add("taskTitle","doneTask"),r.appendChild(c(f[s].task[a].taskTitle,f[s].task[a].details,a,s,f[s].task[a].status)),r.appendChild(d(f[s].task[a].date,f[s].task[a].time,a,f[s].task[a].importance));const k=document.createElement("div");k.classList.add("trashTaskBtn"),k.id="trashTask-"+a,k.innerHTML='<i class="fa-solid fa-trash"></i>',k.addEventListener("click",(()=>{l.deleteTask(a,f[s].task),n.innerHTML="",e(),o()})),r.appendChild(k),n.appendChild(r)}}t.prototype.deleteTask=function(t,e){e.splice(t,1)};const a=document.getElementById("task-btn"),s=document.querySelector(".closeTaskBtn");function n(){document.querySelector(".taskForm").classList.add("hide"),document.forms.formInfo.reset()}const i=document.querySelector(".submitTaskBtn");function l(e){let a=document.querySelector(".task-list");a.innerHTML="";for(let s=0;s<f[e].task.length;s++){let n=f[e].task[s],i=new t(n.taskTitle,n.details,n.date,n.time),r=document.createElement("div");r.id="whole-taskStatus-"+s,0==f[e].task[s].status?r.classList.add("taskTitle"):r.classList.add("taskTitle","doneTask"),p.task=i,r.appendChild(c(p.task.taskTitle,p.task.details,s,e,f[e].task[s].status)),r.appendChild(d(p.task.date,p.task.time,s,f[e].task[s].importance));const k=document.createElement("div");k.classList.add("trashTaskBtn"),k.id="trashTask-"+s,k.innerHTML='<i class="fa-solid fa-trash"></i>',k.addEventListener("click",(()=>{i.deleteTask(s,f[e].task),a.innerHTML="",l(e),o()})),r.appendChild(k),a.appendChild(r)}}function d(t,e,a,s){const n=document.createElement("div");n.classList.add("dataContainer");const i=document.createElement("div");i.classList.add("date"),i.innerHTML=t,n.appendChild(i);const l=document.createElement("div");l.classList.add("time"),l.innerHTML=e,n.appendChild(l);const d=document.createElement("div");return d.classList.add("importantBtn"),d.innerHTML=s?'<i class="fa-solid fa-star"></i>':'<i class="fa-regular fa-star"></i>',d.id="taskImportance-"+a,n.appendChild(d),n}function c(t,e,a,s,n){const i=document.createElement("div");i.classList.add("containerDescription");const d=document.createElement("div");d.classList.add("frontTaskContainer");const c=document.createElement("button");c.setAttribute("type","checkbox"),c.classList.add("check-btn"),c.innerHTML=n?'<i class="fa-solid fa-check"></i>':'<i class="fa-solid fa-rotate"></i>',c.id="taskStatus-"+a,c.addEventListener("click",(()=>{if(n){c.innerHTML='<i class="fa-solid fa-rotate"></i>',n=!1,f[s].task[a].status=!1;const t=document.getElementById("panelTitle");'<i class="fa-solid fa-list-check"></i> All Tasks'==t.innerHTML?(M(),r()):'<i class="fa-solid fa-star"></i> Important Tasks'==t.innerHTML?(I(),r()):'<i class="fa-solid fa-calendar-day"></i> Today\'s Tasks'==t.innerHTML?(C(),m()):'<i class="fa-solid fa-calendar-week"></i> This week\'s tasks'==t.innerHTML?(D(),u()):(l(s),o())}else{c.innerHTML='<i class="fa-solid fa-check"></i>',n=!0,f[s].task[a].status=!0;const t=document.getElementById("panelTitle");'<i class="fa-solid fa-list-check"></i> All Tasks'==t.innerHTML?(M(),r()):'<i class="fa-solid fa-star"></i> Important Tasks'==t.innerHTML?(I(),k()):'<i class="fa-solid fa-calendar-day"></i> Today\'s Tasks'==t.innerHTML?(C(),m()):'<i class="fa-solid fa-calendar-week"></i> This week\'s tasks'==t.innerHTML?(D(),u()):(l(s),o())}})),d.appendChild(c);const p=document.createElement("div");p.innerHTML=t,p.classList.add("indvTaskTitle"),d.appendChild(p),i.appendChild(d);const T=document.createElement("div");return T.classList.add("taskDetails"),T.innerHTML=e,i.appendChild(T),i}const o=()=>{let t=0;const e=document.getElementById("panelTitle");for(let a=0;a<f.length;++a)f[a].title==e.textContent&&(t=a);for(let e=0;e<f[t].task.length;++e){const a=document.getElementById("taskImportance-"+e);a.addEventListener("click",(()=>{const{importance:s}=f[t].task[e];s?s&&(a.innerHTML='<i class="fa-regular fa-star"></i>',f[t].task[e].importance=!1):(a.innerHTML='<i class="fa-solid fa-star"></i>',f[t].task[e].importance=!0)}))}},r=()=>{let t=[],e=0;for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s)document.getElementById("taskImportance-"+s).id="allTaskImp-"+e,t.push(f[a].task[s]),++e;for(let e=0;e<t.length;e++){const a=document.getElementById("allTaskImp-"+e);a.addEventListener("click",(()=>{const{importance:s}=t[e];s?s&&(a.innerHTML='<i class="fa-regular fa-star"></i>',t[e].importance=!1):(a.innerHTML='<i class="fa-solid fa-star"></i>',t[e].importance=!0)}))}},k=()=>{let t=[],e=0;for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s)f[a].task[s].importance&&(document.getElementById("taskImportance-"+s).id="onlyImpTaskBtn-"+e,t.push(f[a].task[s]),++e);for(let e=0;e<t.length;e++){const a=document.getElementById("onlyImpTaskBtn-"+e);a.addEventListener("click",(()=>{const{importance:s}=t[e];s?s&&(a.innerHTML='<i class="fa-regular fa-star"></i>',t[e].importance=!1,I(),k()):(a.innerHTML='<i class="fa-solid fa-star"></i>',t[e].importance=!0,I(),k())}))}},m=()=>{let t=[],e=0;for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s){const n=new Date;let i=n.getDate(),l=n.getMonth()+1,d=`${n.getFullYear()}-${l}-${i}`;f[a].task[s].date==d&&(document.getElementById("taskImportance-"+s).id="todayImpTaskBtn-"+e,t.push(f[a].task[s]),++e)}for(let e=0;e<t.length;e++){const a=document.getElementById("todayImpTaskBtn-"+e);a.addEventListener("click",(()=>{const{importance:s}=t[e];s?s&&(a.innerHTML='<i class="fa-regular fa-star"></i>',t[e].importance=!1,C(),m()):(a.innerHTML='<i class="fa-solid fa-star"></i>',t[e].importance=!0,C(),m())}))}},u=()=>{let t=[],e=0;for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s){const n=new Date;function i(t,e){for(var a=new Array,s=t;s<=e;){let t=("0"+s.getDate()).slice(-2),e=("0"+(s.getMonth()+1)).slice(-2),n=`${s.getFullYear()}-${e}-${t}`;a.push(n),s=s.addDays(1)}return a}Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},i(n,n.addDays(7)).includes(f[a].task[s].date)&&(document.getElementById("taskImportance-"+s).id="weekImpTaskBtn-"+e,t.push(f[a].task[s]),++e)}for(let l=0;l<t.length;l++){const d=document.getElementById("weekImpTaskBtn-"+l);d.addEventListener("click",(()=>{const{importance:e}=t[l];e?e&&(d.innerHTML='<i class="fa-regular fa-star"></i>',t[l].importance=!1,D(),u()):(d.innerHTML='<i class="fa-solid fa-star"></i>',t[l].importance=!0,D(),u())}))}},p={title:"",task:[]};function T(t){this.title=t,this.task=[]}T.prototype.deletePrj=function(t){f.splice(t,1)};let f=[];const h=document.getElementById("add-project"),L=document.querySelector(".submitBtn"),y=document.querySelector(".closeBtn");function g(){document.querySelector("form").classList.add("hide"),document.forms.formInfo.reset()}function E(){let t=document.querySelector(".project-list");t.innerHTML="";for(let s=0;s<f.length;s++){let n=new T(f[s].title);const i=document.createElement("div");i.classList.add("prjContainer");const l=document.createElement("div");l.id=s,p.title=n.title,l.classList.add("prjTitle"),l.innerHTML=n.title,i.appendChild(l);const d=document.createElement("div");d.classList.add("trashBtn"),d.innerHTML='<i class="fa-solid fa-trash"></i>',d.addEventListener("click",(e=>{n.deletePrj(l.id),t.innerHTML="",document.querySelector(".task-btn").style.display="none",document.getElementById("panelTitle").innerHTML='Project "'+n.title+'" has been deleted.',E(),o()})),i.appendChild(d),l.addEventListener("click",(t=>{document.getElementById("panelTitle").textContent=n.title,a.textContent="+ Add Task",a.classList.add("task-btn"),"none"==a.style.display&&(a.style.display="flex"),e(),o()})),t.appendChild(i)}return t}a.addEventListener("click",(()=>{document.getElementById("projectTaskForm").classList.remove("hide")})),i.addEventListener("click",(e=>{let a=document.getElementById("taskTitle"),s=document.getElementById("details"),i=document.getElementById("date"),d=document.getElementById("time");const c=document.getElementById("panelTitle");let r=0;for(let t=0;t<f.length;++t)f[t].title==c.textContent&&(r=t);e.preventDefault(),function(e,a,s,n,i){let l=new t(e,a,s,n);f[i].task.push(l)}(a.value,s.value,i.value,d.value,r),l(r),o(),n()})),s.addEventListener("click",(()=>{n()}));const v=document.getElementById("allTasks");function M(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-list-check"></i> All Tasks',document.querySelector(".task-btn").style.display="none";let e=document.querySelector(".task-list");e.innerHTML="";for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s){let n=f[a].task[s],i=new t(n.taskTitle,n.details,n.date,n.time),l=document.createElement("div");l.id="whole-taskStatus-"+s,0==f[a].task[s].status?l.classList.add("taskTitle"):l.classList.add("taskTitle","doneTask"),p.task=i,l.appendChild(c(p.task.taskTitle,p.task.details,s,a,f[a].task[s].status)),l.appendChild(d(p.task.date,p.task.time,s,f[a].task[s].importance));const o=document.createElement("div");o.classList.add("trashTaskBtn"),o.id="trashTask-"+s,o.innerHTML='<i class="fa-solid fa-trash"></i>',o.addEventListener("click",(()=>{i.deleteTask(s,f[a].task),e.innerHTML="",M(),r()})),l.appendChild(o),e.appendChild(l)}}const H=document.getElementById("important");function I(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-star"></i> Important Tasks',document.querySelector(".task-btn").style.display="none";let e=document.querySelector(".task-list");e.innerHTML="";for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s)if(f[a].task[s].importance){let n=f[a].task[s],i=new t(n.taskTitle,n.details,n.date,n.time),l=document.createElement("div");l.id="whole-taskStatus-"+s,0==f[a].task[s].status?l.classList.add("taskTitle"):l.classList.add("taskTitle","doneTask"),p.task=i,l.appendChild(c(p.task.taskTitle,p.task.details,s,a,f[a].task[s].status)),l.appendChild(d(p.task.date,p.task.time,s,f[a].task[s].importance));const o=document.createElement("div");o.classList.add("trashTaskBtn"),o.id="trashTask-"+s,o.innerHTML='<i class="fa-solid fa-trash"></i>',o.addEventListener("click",(()=>{i.deleteTask(s,f[a].task),e.innerHTML="",I(),k()})),l.appendChild(o),e.appendChild(l)}}const B=document.getElementById("today");function C(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-calendar-day"></i> Today\'s Tasks',document.querySelector(".task-btn").style.display="none";let e=document.querySelector(".task-list");e.innerHTML="";for(let a=0;a<f.length;a++)for(let s=0;s<f[a].task.length;++s){const n=new Date;let i=n.getDate(),l=n.getMonth()+1,o=`${n.getFullYear()}-${l}-${i}`;if(f[a].task[s].date==o){let n=f[a].task[s],i=new t(n.taskTitle,n.details,n.date,n.time),l=document.createElement("div");l.id="whole-taskStatus-"+s,0==f[a].task[s].status?l.classList.add("taskTitle"):l.classList.add("taskTitle","doneTask"),p.task=i,l.appendChild(c(p.task.taskTitle,p.task.details,s,a,f[a].task[s].status)),l.appendChild(d(p.task.date,p.task.time,s,f[a].task[s].importance));const o=document.createElement("div");o.classList.add("trashTaskBtn"),o.id="trashTask-"+s,o.innerHTML='<i class="fa-solid fa-trash"></i>',o.addEventListener("click",(()=>{i.deleteTask(s,f[a].task),e.innerHTML="",C(),m()})),l.appendChild(o),e.appendChild(l)}}}const w=document.getElementById("week");function D(){document.getElementById("panelTitle").innerHTML='<i class="fa-solid fa-calendar-week"></i> This week\'s tasks',document.querySelector(".task-btn").style.display="none";let e=document.querySelector(".task-list");e.innerHTML="";for(let s=0;s<f.length;s++)for(let n=0;n<f[s].task.length;++n){const i=new Date;function l(t,e){for(var a=new Array,s=t;s<=e;){let t=("0"+s.getDate()).slice(-2),e=("0"+(s.getMonth()+1)).slice(-2),n=`${s.getFullYear()}-${e}-${t}`;a.push(n),s=s.addDays(1)}return a}Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};var a=l(i,i.addDays(7));if(console.log(a),a.includes(f[s].task[n].date)){let o=f[s].task[n],r=new t(o.taskTitle,o.details,o.date,o.time),k=document.createElement("div");k.id="whole-taskStatus-"+n,0==f[s].task[n].status?k.classList.add("taskTitle"):k.classList.add("taskTitle","doneTask"),p.task=r,k.appendChild(c(p.task.taskTitle,p.task.details,n,s,f[s].task[n].status)),k.appendChild(d(p.task.date,p.task.time,n,f[s].task[n].importance));const m=document.createElement("div");m.classList.add("trashTaskBtn"),m.id="trashTask-"+n,m.innerHTML='<i class="fa-solid fa-trash"></i>',m.addEventListener("click",(()=>{r.deleteTask(n,f[s].task),e.innerHTML="",D(),u()})),k.appendChild(m),e.appendChild(k)}}}h.addEventListener("click",(()=>{document.getElementById("projectForm").classList.remove("hide")})),L.addEventListener("click",(t=>{let e=document.getElementById("projectName");if(t.preventDefault(),""!==e.value){let t=new T(e.value);for(let e=0;e<f.length;++e)if(t.title==f[e].title)return void window.alert("Project title cannot be repeated or be blank.");!function(t){f.push(t)}(t),E(),g()}})),y.addEventListener("click",(()=>{g()})),v.addEventListener("click",(()=>{M(),r()})),H.addEventListener("click",(()=>{I(),k()})),B.addEventListener("click",(()=>{C(),m()})),w.addEventListener("click",(()=>{D(),u()}))})();